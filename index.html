<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>TAE TETRIS</title>
<style>
html, body {
  margin:0; padding:0;
  height:100%; width:100%;
  overflow:hidden; background:#111;
  font-family:sans-serif;
  touch-action: manipulation;
}
#container {
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:flex-start;
  height:100%;
  width:100%;
  padding-top:20px;
}
#scoreboard { color:white; font-size:24px; margin-bottom:5px; text-align:center;}
#instructions { color:#aaa; font-size:16px; margin-bottom:5px; text-align:center;}
#credit { color:#777; font-size:14px; margin-bottom:10px; text-align:center;}
#game {
  display: grid;
  grid-template-rows: repeat(20, 1fr);
  grid-template-columns: repeat(10, 1fr);
  gap: 1px;
  width: 90vw;
  max-width: 400px;
  aspect-ratio: 10 / 20;
  background: #222;
}
.cell { width: 100%; height: 100%; background: #111; }
.controls {
  display:flex; justify-content:center; gap:10px; margin-top:10px;
}
.btn {
  width:70px; height:70px;
  background:rgba(255,255,255,0.2);
  display:flex; align-items:center; justify-content:center;
  font-size:32px; border-radius:10px; user-select:none;
}
</style>
</head>
<body>
<div id="container">
  <div id="scoreboard">Score: <span id="score">0</span></div>
  <div id="instructions">Swipe or use buttons to move & rotate. Fill lines to score!</div>
  <div id="credit">Made by @nortydigitalcrew</div>
  <div id="game"></div>
  <div class="controls">
    <div id="left" class="btn">◀</div>
    <div id="rotate" class="btn">⟳</div>
    <div id="right" class="btn">▶</div>
    <div id="down" class="btn">▼</div>
  </div>
</div>

<script>
const rows = 20;
const cols = 10;
const game = document.getElementById('game');
const scoreEl = document.getElementById('score');
let score = 0;

// Grid creation
let grid = [];
for(let r=0;r<rows;r++){
  let row=[];
  for(let c=0;c<cols;c++){
    const cell = document.createElement('div');
    cell.className='cell';
    game.appendChild(cell);
    row.push(cell);
  }
  grid.push(row);
}

// Pieces
const colors = ['cyan','blue','orange','yellow','green','purple','red'];
const pieces = [
  [[1,1,1,1]], // I
  [[1,0,0],[1,1,1]], // J
  [[0,0,1],[1,1,1]], // L
  [[1,1],[1,1]], // O
  [[0,1,1],[1,1,0]], // S
  [[0,1,0],[1,1,1]], // T
  [[1,1,0],[0,1,1]]  // Z
];

// Piece state
let currentPiece = null;
let posX=0,posY=0;
let fallSpeed=500;
let dropInterval;

// Spawn new piece
function newPiece(){
  const p = pieces[Math.floor(Math.random()*pieces.length)];
  const color = colors[Math.floor(Math.random()*colors.length)];
  currentPiece={shape:p,color:color};
  posX=Math.floor(cols/2)-Math.floor(p[0].length/2);
  posY=0;
}

// Draw function
function draw(){
  for(let r=0;r<rows;r++){
    for(let c=0;c<cols;c++){
      grid[r][c].style.background=grid[r][c].dataset